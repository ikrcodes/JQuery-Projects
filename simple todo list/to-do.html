<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To do list app</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <script src="../js/jquery.js"></script>
    <script>
      $(document).ready(function () {
        //code for enter tasks
        $("#btn-add").click(function () {
          var txt = $("#txt").val();
          var key = localStorage.length + 1;
          //code for set data
          if (!txt || txt == "") {
            alert("pleased enter the task..");
          } else {
            localStorage.setItem(key, txt);
            $("#txt").val("");
          }
        });
        //code for get data

        //check if no tasks available
        if (localStorage.length == 0) {
          $("#msg").text("No Tasks Available!");
        }
        for (i = localStorage.length; i > 0; i--) {
          $("#list").append(`
                    <li data-key=${i} style="list-style: none; background-color: #dadada; padding: 10px; margin: 10px auto; border-radius: 5px; box-shadow: 3px 3px 5px gray; display:flex; justify-content: space-between;">
                        <span>${localStorage.getItem(i)}</span>
                        <div style="display: flex; gap: 10px; ">
                            <button class="btn btn-success" >Complete</button>
                            <button class="btn btn-danger" >Remove</button>
                        </div>
                    </li>
                `);
        }
        //code for complete task
        $(".btn-success").click(function () {
          var text = $(this).closest("li").find("span").text();
          for (i = 1; i <= localStorage.length; i++) {
            if (localStorage.getItem(i) == text) {
              //edit
              localStorage.setItem(i, text + "(Completed)");
            }
          }
        });
        //code for remove task
        $(".btn-danger").on("click", function () {
          var text = $(this).closest("li").find("span").text();
          let key = $(this).closest("li").data("key");
        //   localStorage.removeItem(key);
        alert(key);
        });
      });
    </script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm-3"></div>
        <div class="col-sm-6 shadow my-4">
          <h3 class="text text-center text-success">Simple to-do list app</h3>
          <hr
            style="height: 5px; background-color: #008080; margin: 5px auto"
          />
          <div style="display: flex; gap: 20px; padding: 10px">
            <input
              type="text"
              id="txt"
              class="form-control"
              placeholder="Add a new task..."
            />
            <button
              class="btn btn-success"
              style="flex-basis: 25%"
              id="btn-add"
            >
              Add Task
            </button>
          </div>
          <hr />
          <i
            id="msg"
            style="
              font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS',
                sans-serif;
              font-size: 25px;
              color: rgb(250, 66, 66);
            "
          ></i>
          <ul id="list" style=""></ul>
        </div>
        <div class="col-sm-3"></div>
      </div>
    </div>
  </body>
</html>
